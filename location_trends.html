<!doctype html><meta charset="utf-8">
<style>.vega-bindings, .vega-bindings label, .vega-bindings .vega-bind-name{color:#fff}</style>
<div id="trend"></div>
<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
<script>
vegaEmbed("#trend",{
  "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
  "data":{"url":"./domestic_international_by_state_institution_year.csv"},
  "params":[
    {"name":"PickState","value":"Victoria","bind":{"input":"select","options":[
      "New South Wales","Victoria","Queensland","Western Australia","South Australia",
      "Tasmania","Northern Territory","Australian Capital Territory"
    ]}}
  ],
  "transform":[
    {"calculate":
      "datum.State=='NSW'?'New South Wales':datum.State=='VIC'?'Victoria':" +
      "datum.State=='QLD'?'Queensland':datum.State=='WA'?'Western Australia':" +
      "datum.State=='SA'?'South Australia':datum.State=='TAS'?'Tasmania':" +
      "datum.State=='NT'?'Northern Territory':datum.State=='ACT'?'Australian Capital Territory':datum.State",
     "as":"StateFull"},
    {"filter":"datum.StateFull==PickState"},
    {"aggregate":[{"op":"sum","field":"Enrolments","as":"Cnt"}],"groupby":["Year","Citizenship"]}
  ],
  "mark":{"type":"line","point":true},
  "encoding":{
    "x":{"field":"Year","type":"quantitative",
         "axis":{"title":"Year","format":"d","tickMinStep":1}},
    "y":{"field":"Cnt","type":"quantitative","title":"Enrolments"},
    "color":{"field":"Citizenship","type":"nominal"},
    "tooltip":[
      {"field":"Year","type":"quantitative","title":"Year","format":"d"},
      {"field":"Citizenship","type":"nominal"},
      {"field":"Cnt","type":"quantitative","title":"Enrolments","format":",d"}
    ]
  },
  "title":{"text":{"expr":"'Domestic vs International â€” '+PickState"}},
  "width":960,"height":450,"config":{"view":{"stroke":null}}
},{actions:false});
</script>

